<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style type="text/css">

    </style>
</head>

<body>

    <div class="list-block loginBox">
        <ul>
            <!-- Text inputs -->
            <li>
                <div class="item-content">
                    <div class="item-inner">
                        <div class="item-title label">账号</div>
                        <div class="item-input">
                            <input type="text" placeholder="请输入手机号码" class="userTel" value="">
                        </div>
                    </div>
                </div>
            </li>
            <li>
                <div class="item-content">
                    <div class="item-inner">
                        <div class="item-title label">密码</div>
                        <div class="item-input">
                            <input type="password" placeholder="请输入6-20位字符" class="userPw" value="" maxlength="20">
                        </div>
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <div class="content-block">
        <div class="row">
            <div class="col-100"><input type="submit" value="登录" id="login" class="button button-big button-fill button-danger disabled"></div>
        </div>
    </div>
    <script>
        require.config({
            paths: {
                "base": "../../js/base/base",
                "secMenu": "../../js/base/secMenu",
                "template": "../../js/base/template"
            }
        });
        define(['base', 'template', 'secMenu'], function(base, template, secMenu) {
            function userTel() {
                regExp = /^1[3|4|5|7|8]\d{9}$/;
                if ($(".userTel").val() == "") {
                    $.toast('账号不能为空', 2000)
                    return false;
                } else if (!regExp.test($(".userTel").val())) {
                    $.toast('账号格式错误', 2000)
                    return false;
                } else {
                    return true;
                }
            }
            $(".userTel").blur(userTel);

            //密码校验：6-20数字和英文的组合
            function userPw() {
                regExp = /^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,20}$/;
                if ($(".userPw").val() == "") {
                    $.toast('密码不能为空', 2000)
                    return false;
                } else if (!regExp.test($(".userPw").val())) {
                    $.toast('密码格式错误', 2000)
                    return false;
                } else {
                    return true;
                }
            }
            $(".userPw").blur(userPw);

            var timer = -1;
            $(".userTel,.userPw").bind("keyup", function(event) {
                var val = $(this).val();
                timer && clearTimeout(timer);
                timer = setTimeout(function() {
                    if (userTel() && userPw()) {
                        $("#login").removeClass("disabled");
                        return true;
                    } else {
                        $("#login").addClass("disabled");
                        return false;
                    }
                    //将值发送到服务器
                    getCompList(val);
                }, 1500);
            })

        });
    </script>
</body>

</html>